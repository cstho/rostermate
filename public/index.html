<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="google-signin-client_id" content="228785096024-urkf238k12bviif2ij9o2oghqpm7gc95.apps.googleusercontent.com">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
<!-- Bootstrap core CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
<!-- Material Design Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/css/mdb.min.css" rel="stylesheet">


  <title>RosterMate</title>
</head>




<!-- Body-->

<body>

 <!--Navbar -->
<nav class="navbar navbar-expand-lg navbar-fixed-top navbar-dark indigo ">
  <img src="/images/RosterMate.png" alt="logo" class="center" height="20" width="40" style="filter: brightness(0) invert(1);">
  <div class="mr-2"></div>
  <a class="navbar-brand" href="/">RosterMate</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent-333"
    aria-controls="navbarSupportedContent-333" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent-333">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="/index.html">Get Started</a>
      </li>
      <li class="nav-item" id="dynamo">
        <a class="nav-link" href="/roster.html">Roster</a>
      </li>

    </ul>
    <ul class="navbar-nav ml-auto nav-flex-icons">

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-333" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false" href="/#">
          <i class="fas fa-user" ></i>
          <span  id="logged-name"></span>
          <span> - </span>
          <span id="logged-id"></span>
        </a>

        <div style="display:none;" class="navbar-text" id="logged-email"></div>
        <div class="dropdown-menu dropdown-menu-right dropdown-default"
          aria-labelledby="navbarDropdownMenuLink-333">
          <a class="dropdown-item" href="/profile.html" style="display: none;" id="profile-element"><i class="fas fa-id-card fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Profile</a>
          <a class="dropdown-item" data-toggle="modal" data-target="#loginModal" id="login-element"><i class="fas fa-sign-in-alt fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Login</a>
          <a class="dropdown-item" data-toggle="modal" data-target="#registerModal" id="register-element"><i class="fas fa-user-plus fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Register</a>
          <a class="dropdown-item" data-toggle="modal" onclick="logout()" style="display: none;" id="logout-element"><i class="fa fa-sign-out fa-sm fa-fw mr-2 text-gray-400" ></i>&nbsp;Logout</a>
        </div>
      </li>
    </ul>
  </div>
</nav>
<!--/.Navbar -->




  <!-- Body -->
  <div class="jumbotron">
    <h2>Welcome to RosterMate</h2>
    <p>RosterMate is an all in one rostering solution made for productivity.</p>
    <a class="btn btn-primary" href="roster.html" role="button">Get Started</a>

  </div>


  <!-- Modal Login -->
  <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="loginModalLabel">Login</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
          <div class="login-form">
            <form action="emailLog" method="POST">
              <div style = "display:none" id="lealert" class="alert alert-danger" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="alert-heading">Login Failed</h4>
                <div id=lerrors></div>
                </div>
              <label for="email">Email</label>
              <input type="email" class="form-control" id="lemail" name="email" placeholder="Email" required>
              <div class="mt-3"></div>
              <label for="password">Password</label>
              <input type="password" class="form-control" id="lpassword" name="password" placeholder="Password" required>
              <div class="modal-footer">
                <p>By logging in you agree with our Terms and Conditions and Privacy Policy.</p>
                <a href="#" data-dismiss="modal" aria-label="Close" data-toggle="modal" data-target="#registerModal">Don't have an account? Register here.</a>
                <div id="my-signin2"></div>
                <button class = "btn btn-success" type="button" onclick="login()">Login</button>
                <div class="g-signin2" data-onsuccess="onSignIn"></div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Register -->
  <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel1" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="loginModalLabel1">Register</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
          <div class="login-form">
            <form  method="POST">
              <div style = "display:none" id="ealert" class="alert alert-danger" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="alert-heading">Register Failed</h4>
                <div id=errors></div>
                </div>
              <label for="fullname">Full Name</label>
              <input type="text" class="form-control" id="fullname" placeholder="Full Name" required>
              <div class="mt-3"></div>

              <label for="email">Email</label>
              <input type="email" class="form-control" id="email" placeholder="Email" required>
              <div class="mt-3"></div>
              <label for="password">Password</label>
              <input type="password" class="form-control" id="password" placeholder="Password" required>
              <div class="mt-3"></div>
              <label for="cpassword">Confirm Password</label>
              <input type="password" class="form-control" id="cpassword" placeholder="Password" required>
              <div class="mt-3"></div>
               <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="isManager">
                <label class="form-check-label changeManager" for="isManager">
                  Manager Account
                </label>
              </div>


              <div class="modal-footer">
                <div id="my-signin3"></div>
                <a href="#" data-dismiss="modal" aria-label="Close" data-toggle="modal" data-target="#loginModal">Already have an account? Login here.</a>

                <button class = "btn btn-success" type="button" onclick="register()">Register</button>
                <div class="g-signin2" data-onsuccess="onRegister"></div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>




  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <!-- JQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Bootstrap tooltips -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/js/mdb.min.js"></script>
<script src="/javascripts/profile.js"></script>
<script src="/javascripts/logins.js"></script>


<script>
    var navClassSelector=document.getElementsByClassName("nav-item");
    var navClassSub=document.getElementsByClassName("nav-link");
    var path=window.location.href;

    for(i=0;i<navClassSelector.length;i++){
      if(path.includes(navClassSub[i].href)){
        navClassSelector[i].classList.add("active");
      }
    }
</script>

<script>
      var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {

          var profileInfo = JSON.parse(this.responseText);
          var manager=profileInfo[0].manager;
          console.log('Calling Menu Updater');

          if(profileInfo.length!=0){
              document.getElementById("profile-element").style.display='block';
              document.getElementById("logout-element").style.display='block';
              document.getElementById("register-element").style.display='none';
              document.getElementById("login-element").style.display='none';
          }

        }
    };

    xhttp.open("GET", "/profile.json", true);
    xhttp.send();
     xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {

          var profileInfo = JSON.parse(this.responseText);
          var fullname=profileInfo[0].fullname;


          document.getElementById('logged-name').innerHTML=fullname;

        }
    };

    xhttp.open("GET", "/profile.json", true);
    xhttp.send();
</script>
<script src="https://muhdfaiz.github.io/js-loading-overlay/js-loading-overlay.min.js"></script>
<script src="/javascripts/logins.js"></script>
<script src="/javascripts/roster.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>




</body>

</html>
